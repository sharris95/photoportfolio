<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Samuel Harris | Porches</title>
  <meta name="description" content="Porches commission by Samuel Harris." />
  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header" role="banner">
    <div class="container header-inner">
      <a class="brand" href="index.html">Samuel Harris</a>

      <nav class="site-nav" aria-label="Primary">
        <a href="index.html">Photo</a>
        <a href="commissions.html" aria-current="page">Commissions</a>
        <a href="about.html">About</a>
        <a href="mailto:samuel.harris9005@gmail.com">Contact</a>
      </nav>
    </div>
  </header>

  <main id="main" class="container">
    <section class="section">
      <p class="eyebrow"><a href="commissions.html">Back to commissions</a></p>
      <h1 class="section-title">Porches</h1>
    </section>

    <section class="stream" aria-label="Porches commission">
      <figure class="shot"><img src="assets/Commissions/Porches/1.webp" alt="Porches commission photo 1" loading="eager" decoding="async" /></figure>
      <figure class="shot"><img src="assets/Commissions/Porches/2.webp" alt="Porches commission photo 2" loading="lazy" decoding="async" /></figure>
      <figure class="shot"><img src="assets/Commissions/Porches/3.webp" alt="Porches commission photo 3" loading="lazy" decoding="async" /></figure>
      <figure class="shot"><img src="assets/Commissions/Porches/4.webp" alt="Porches commission photo 4" loading="lazy" decoding="async" /></figure>
      <figure class="shot"><img src="assets/Commissions/Porches/5.webp" alt="Porches commission photo 5" loading="lazy" decoding="async" /></figure>
      <figure class="shot"><img src="assets/Commissions/Porches/6.webp" alt="Porches commission photo 6" loading="lazy" decoding="async" /></figure>
      <figure class="shot"><img src="assets/Commissions/Porches/7.webp" alt="Porches commission photo 7" loading="lazy" decoding="async" /></figure>
      <figure class="shot"><img src="assets/Commissions/Porches/8.webp" alt="Porches commission photo 8" loading="lazy" decoding="async" /></figure>
      <figure class="shot"><img src="assets/Commissions/Porches/9.webp" alt="Porches commission photo 9" loading="lazy" decoding="async" /></figure>
    </section>

    <footer class="site-footer" role="contentinfo">
      <p>© <span id="year"></span> Samuel Harris</p>
    </footer>
  </main>

  <div class="lightbox" role="dialog" aria-modal="true" aria-hidden="true">
    <button class="lightbox-close" type="button">Close</button>
    <button class="lightbox-arrow lightbox-prev" type="button" aria-label="Previous photo">←</button>
    <img src="" alt="" />
    <button class="lightbox-arrow lightbox-next" type="button" aria-label="Next photo">→</button>
  </div>

  <script>
    if ("scrollRestoration" in history) {
      history.scrollRestoration = "manual";
    }
    window.scrollTo(0, 0);
    document.getElementById("year").textContent = new Date().getFullYear();

    const streamImages = Array.from(document.querySelectorAll(".stream img"));
    const lightbox = document.querySelector(".lightbox");
    const lightboxImg = lightbox.querySelector("img");
    const closeBtn = lightbox.querySelector(".lightbox-close");
    const prevBtn = lightbox.querySelector(".lightbox-prev");
    const nextBtn = lightbox.querySelector(".lightbox-next");
    let currentIndex = 0;
    const lightboxEnabled = !window.matchMedia("(max-width: 560px)").matches;

    const setImage = (index) => {
      currentIndex = (index + streamImages.length) % streamImages.length;
      const img = streamImages[currentIndex];
      lightboxImg.src = img.src;
      lightboxImg.alt = img.alt || "Photo";
    };

    const openLightbox = (index) => {
      setImage(index);
      lightbox.classList.add("is-open");
      lightbox.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    };

    const closeLightbox = () => {
      lightbox.classList.remove("is-open");
      lightbox.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    };

    const step = (delta) => {
      setImage(currentIndex + delta);
    };

    if (lightboxEnabled) {
      streamImages.forEach((img, index) => {
        img.addEventListener("click", () => openLightbox(index));
      });

      closeBtn.addEventListener("click", closeLightbox);
      prevBtn.addEventListener("click", () => step(-1));
      nextBtn.addEventListener("click", () => step(1));
      lightbox.addEventListener("click", (event) => {
        if (event.target === lightbox) closeLightbox();
      });

      document.addEventListener("keydown", (event) => {
        if (!lightbox.classList.contains("is-open")) return;
        if (event.key === "Escape") closeLightbox();
        if (event.key === "ArrowLeft") step(-1);
        if (event.key === "ArrowRight") step(1);
      });
    } else {
      lightbox.setAttribute("aria-hidden", "true");
    }
  </script>
</body>
</html>
